<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title>Writing Specs with Org-mode - Katherine Cox-Buday</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="author" content="Katherine Cox-Buday" />

  <!-- Mobile support -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="/media/css/main.css" type="text/css">
  <!-- <link rel="stylesheet" href="/media/css/prettify.css" type="text/css"> -->

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
  <!-- Latest compiled and minified JavaScript -->
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
</head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col-sm-9 blog-main">
          <div class="post">
  <div class="col-sm-3 right-align post-meta">
    <h3>&nbsp;<!-- Placeholder for alignment with post --></h3>
  </div>
  <div class="col-sm-9">
    <div class="post">
      <h3>Writing Specs with Org-mode</h3>
      <p>
A lot of people have commented on the specifications I produce for the products I have worked on. I can't think of a humble way to say this, and I must make the point, so here it is: it is not uncommon for them to say that they are easy to read, clear, and more useful than most specifications they've read. Very often the next thing is a question: how'd you do that?
</p>

<div id="outline-container-orgaf185b1" class="outline-2">
<h2 id="orgaf185b1">Core Ideas</h2>
<div class="outline-text-2" id="text-orgaf185b1">
<p>
Right off the bat, let's get one thing clear: content is paramount. You can spend a lot of time producing a beautiful document that is useless. Don't do that. The style should support the content, and help bring out the information. Having said that, after a little bit of setup, you can produce beautiful <i>and</i> useful documents in about as long as it takes you to form the ideas. I've tested this.
</p>

<p>
The key is that the entire spec will be written in plain-text with a bit of markup supported by the spec-editor. This allows you to stay agile, and stay focused on the content, not how your document looks.
</p>

<p>
After setting things up, you can have a nice specification that:
</p>

<ol class="org-ol">
<li>Looks great, and includes example diagrams.</li>
<li>Is easy to update.</li>
<li>Automatically generates code for developers to fill-out.</li>
</ol>

<p>
Number 3 is quite handy as the details form. You can be sure that the code always reflects the latest iteration of the specifications and vice-versa. This also saves lots of time since the code doesn't have to be written twice.
</p>
</div>
</div>

<div id="outline-container-orgb1a236e" class="outline-2">
<h2 id="orgb1a236e">Drawbacks</h2>
<div class="outline-text-2" id="text-orgb1a236e">
<p>
Like anything, there are a few drawbacks.
</p>

<ol class="org-ol">
<li><p>
Collaboration.
</p>

<p>
If you expect others to edit this document, and they're not using an editor that understands Org-mode syntax, it can very quickly become too cumbersome to manually merge their changes into the "master" document. The alternative: to allow them to use any editor and conform to Org syntax isn't horrible by any stretch of the imagination &#x2013; Org's syntax is incredibly sparse &#x2013; but people who don't already know Org will probably be resistant. If collaboration for your team means multiple people editing the document &#x2013; not just making comments &#x2013; then this method might not be worth it.
</p>

<p>
A cursory search turns up Org syntax support for <a href="https://github.com/jceb/vim-orgmode">VIM</a> and <a href="https://github.com/danielmagnussons/orgmode">Sublime</a>, two other popular editors, although since I don't use them I can't comment on their usefulness.
</p></li>

<li><p>
Perception
</p>

<p>
This is only an issue in some environments, but because the specifications you'll be producing are such high-quality, a perception can sneak in that the team is spending much too long creating them. This is a valid concern; some teams spend entirely too much time on their specs only to find out that the thing they've been designing needs to go in a different direction. This is why the speed of this technique is so crucial. Usually this concern can be addressed with a bit of education (send them here!)
</p></li>
</ol>
</div>
</div>

<div id="outline-container-org6053789" class="outline-2">
<h2 id="org6053789">The Tools</h2>
<div class="outline-text-2" id="text-org6053789">
<ul class="org-ul">
<li><p>
Emacs
</p>

<p>
Editor choice can be a contentious topic, but because Emacs provides the best support for Org-mode, it's what I would use. For this article's purposes, you could replace the word Emacs with "Specification Creator". I will be providing a config file that will make Emacs operate like a notepad-clone with a few cool Org-mode tricks. Basically, you can pretend this is just a specification editor, not a general-purpose editor choice. Open it, work on your spec, and then go back to your editor of choice for the rest of your work.
</p>

<p>
I should note that if you use Emacs as your editor for programming as well, things will move even faster, but this is by no means a requisite for this system.
</p></li>

<li><p>
Org-mode
</p>

<p>
Plug-in for Emacs. Although Org-mode can do many things, for this article, we're only interested in it's document creation and export functionality. The most important property of Org-mode is that it's plain-text.
</p></li>

<li><p>
Plant UML
</p>

<p>
If you don't plan on making UML diagrams, you don't need this. Plain-text based UML diagraming tool used to produce most diagrams. Sparse syntax.
</p></li>

<li><p>
LaTeX
</p>

<p>
This is only part of the stack because this is what we'll tell Org-mode to export in order to receive PDF's. If you don't want to, you won't have to deal with LaTeX at all. In fact, I'm going to omit any custom styling in this tutorial for the sake of simplicity.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org284f81f" class="outline-2">
<h2 id="org284f81f">The Work flow</h2>
<div class="outline-text-2" id="text-org284f81f">
</div>
<div id="outline-container-orgf34070e" class="outline-3">
<h3 id="orgf34070e">One-time Setup</h3>
<div class="outline-text-3" id="text-orgf34070e">
<p>
When you start, you'll have to set up a few things, namely the specification editor and optionally a LaTeX style-sheet to stylize your documents. However, after this is done, you'll only have to revisit it if you wish to change the style. After the initial setup, your documents just fall out as you type.
</p>
</div>

<div id="outline-container-orgc357c6f" class="outline-4">
<h4 id="orgc357c6f">Installing the Tools</h4>
<div class="outline-text-4" id="text-orgc357c6f">
<ol class="org-ol">
<li>Install Emacs</li>
<li>Install LaTeX</li>
<li><p>
Install Plant UML
</p>

<p>
You must have Java installed to use Plant UML. Grab the latest version of the <a href="http://sourceforge.net/projects/plantuml/files/plantuml.jar/download">.jar file</a> and put it in your path.
</p></li>

<li><p>
Copy this Emacs <a href="/assets/blog/2015/03/14/writing-specs-with-org-mode/spec-cfg.el">config-file</a>
</p>

<p>
You can either place it in ~/.emacs, or alternatively run emacs as such:
</p>

<pre class="example">
emacs --no-init-file --load ./spec-cfg.el
</pre>


<p>
This is a simple config-file aimed at people who are unfamiliar with Emacs and don't care to be. It will automatically install all required packages, and place the user in an editor with <a href="http://en.wikipedia.org/wiki/Table_of_keyboard_shortcuts#General_shortcuts">CUA key-bindings</a>.
</p>

<p>
Those already utilizing Emacs should strip out the requisite pieces and place them into their own config file.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span>(require 'package)
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span>;; Install requisite packages
<span class="linenr"> 4: </span>;;
<span class="linenr"> 5: </span>;;
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>(add-to-list 'package-archives '("org" . "http://orgmode.org/elpa/") t)
<span class="linenr"> 8: </span>(package-initialize)
<span class="linenr"> 9: </span>(when (not package-archive-contents)
<span class="linenr">10: </span>  (package-refresh-contents))
<span class="linenr">11: </span>
<span class="linenr">12: </span>(mapcar #'(lambda (package) (unless (package-installed-p package) (package-install package)))
<span class="linenr">13: </span>        '(org-plus-contrib plantuml-mode))
<span class="linenr">14: </span>
<span class="linenr">15: </span>;; Set up plantuml.
<span class="linenr">16: </span>;;
<span class="linenr">17: </span>;;
<span class="linenr">18: </span>
<span class="linenr">19: </span>(org-babel-do-load-languages
<span class="linenr">20: </span> 'org-babel-load-languages
<span class="linenr">21: </span> '((plantuml . t)))
<span class="linenr">22: </span>
<span class="linenr">23: </span>(setq org-plantuml-jar-path
<span class="linenr">24: </span>      (setq plantuml-jar-path (expand-file-name "./plantuml.jar")))
<span class="linenr">25: </span>
<span class="linenr">26: </span>;; Setup latex exporting
<span class="linenr">27: </span>;;
<span class="linenr">28: </span>;;
<span class="linenr">29: </span>
<span class="linenr">30: </span>(unless (boundp 'org-latex-classes)
<span class="linenr">31: </span>  (setq org-latex-classes nil))
<span class="linenr">32: </span>
<span class="linenr">33: </span>(add-to-list 'org-latex-classes
<span id="coderef-stylesheet-name" class="coderef-off"><span class="linenr">34: </span>             '("my-style"</span>
<span id="coderef-stylesheet-loc" class="coderef-off"><span class="linenr">35: </span>               "\\documentclass{./my-style}</span>
<span class="linenr">36: </span>                 [DEFAULT-PACKAGES]
<span class="linenr">37: </span>                 [PACKAGES]
<span class="linenr">38: </span>                 [EXTRA]"
<span class="linenr">39: </span>               ("\\section{%s}" . "\\section{%s}")
<span class="linenr">40: </span>               ("\\subsection{%s}" . "\\subsection{%s}")
<span class="linenr">41: </span>               ("\\subsubsection{%s}" . "\\subsubsection{%s}")
<span class="linenr">42: </span>               ("\\paragraph{%s}" . "\\paragraph{%s}")
<span class="linenr">43: </span>               ("\\subparagraph{%s}" . "\\subparagraph{%s}")))
<span class="linenr">44: </span>
<span class="linenr">45: </span>;; Switch into CUA mode for those not familar with emacs keybindings.
<span class="linenr">46: </span>;;
<span class="linenr">47: </span>;;
<span class="linenr">48: </span>
<span class="linenr">49: </span>(cua-mode)
</pre>
</div></li>
</ol>
</div>
</div>

<div id="outline-container-orge6707b6" class="outline-4">
<h4 id="orge6707b6">Create Your Style</h4>
<div class="outline-text-4" id="text-orge6707b6">
<p>
If you wanted to, you could skip the section and just utilize LaTeX's very sensible default style. Your document won't look quite as pretty, but all of your documents will be well-formed, readable, and consistent.
</p>

<p>
In the config-file, we let Org-mode know about the <a href="#coderef-stylesheet-name" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-stylesheet-name');" onmouseout="CodeHighlightOff(this, 'coderef-stylesheet-name');">my-style</a> style located in the <a href="#coderef-stylesheet-loc" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-stylesheet-loc');" onmouseout="CodeHighlightOff(this, 'coderef-stylesheet-loc');">local-directory</a>. If you wanted to add additional styles, you would just repeat lines 33-43 for each additional style.
</p>

<p>
For the sake of brevity I'm going to skip any walkthrough on creating a LaTeX stylesheet. There are pleanty of resources for this elsewhere.
</p>
</div>
</div>
</div>

<div id="outline-container-org60b90c0" class="outline-3">
<h3 id="org60b90c0">Creating Documents</h3>
<div class="outline-text-3" id="text-org60b90c0">
<p>
Once you have everything set up, things become very easy. The only thing you truly need is a few headers:
</p>

<div class="org-src-container">
<pre class="src src-org">#+TITLE: My Software Specification
#+AUTHOR: Katherine Cox-Buday
#+LaTeX_CLASS: my-style
</pre>
</div>

<p>
That's it. After this, it's all content &#x2013; and it's all in plain text. So here's what a small document might look like:
</p>

<div class="org-src-container">
<pre class="src src-org">#+TITLE: My Software Specification
#+AUTHOR: Katherine Cox-Buday
#+LaTeX_CLASS: my-style

* Heading One

** Sub Heading A
- List Item 1
- List Item 2

* Heading Two

| Column 1 | Column 2 |
|----------+----------|
| A        |        1 |
| B        |        2 |
| C        |        3 |
|----------+----------|
</pre>
</div>
</div>

<div id="outline-container-org0f68de0" class="outline-4">
<h4 id="org0f68de0">PlantUML</h4>
<div class="outline-text-4" id="text-org0f68de0">
<p>
As stated above, PlantUML isn't necessary if you don't plan on including any UML diagrams. If you would like to include some diagrams, you will be taking advantage of Org-Mode's source-code block features.
</p>

<p>
To open a source-code block, enter the following:
</p>

<div class="org-src-container">
<pre class="src src-org">#+BEGIN_SRC plantuml

#+END_SRC
</pre>
</div>

<p>
Then place the cursor in between the opening and closing blocks and navigate to the menu bar. Click on "Org &gt; Editing &gt; Edit Source Example."
</p>

<p>
This will open a new buffer in emacs where you can type in PlantUML code &#x2013; and because you told Org that this was going to be PlantUML code &#x2013; you have all the features you'd expect from emacs when editing a PlantUML file. In fact, this works with almost any language.
</p>
</div>
</div>
</div>

<div id="outline-container-org33d0dcc" class="outline-3">
<h3 id="org33d0dcc">Exporting</h3>
<div class="outline-text-3" id="text-org33d0dcc">
<p>
To further expand our example above, the document might look like this:
</p>

<div class="org-src-container">
<pre class="src src-org">#+TITLE: My Software Specification
#+AUTHOR: Katherine Cox-Buday
#+LaTeX_CLASS: my-style

* Heading One

** Sub Heading A
- List Item 1
- List Item 2

* Heading Two

| Column 1 | Column 2 |
|----------+----------|
| A        |        1 |
| B        |        2 |
| C        |        3 |
|----------+----------|

#+BEGIN_SRC plantuml
Bob-&gt;Alice : hello
#+END_SRC
</pre>
</div>

<p>
To export this, navigate to the menu-bar and click on the "Org &gt; Export/Publish" menu. You'll see a menu come up with a lot of options, and the hot-keys in square brackets. Since we're producing PDFs, you would strike "l" for "Export to LaTeX" and then "o" for "As PDF file and open". The final result would look like this:
</p>


<div id="org7cc5369" class="figure">
<p><img src="/assets/blog/2015/03/14/writing-specs-with-org-mode/finished-spec-pdf.png" alt="finished-spec-pdf.png" width="300px" class="img-thumbnail" />
</p>
<p><span class="figure-number">Figure 1: </span>An Unstyled Document</p>
</div>


<div id="org49e8110" class="figure">
<p><img src="/assets/blog/2015/03/14/writing-specs-with-org-mode/finished-styled-spec-pdf.png" alt="finished-styled-spec-pdf.png" width="300px" class="img-thumbnail" />
</p>
<p><span class="figure-number">Figure 2: </span>A Styled Document</p>
</div>

<p>
Not bad for a few lines of plain text, right? In the second example, we can see a nice title page, an auto-generated table-of-contents, page numbers, and descriptive footers. Here, LaTeX is doing the heavy lifting, and all we've done is write some plaint text. This is the essence of how we can turn out beautiful, useful documents so quickly: we spend all of our time focusing on the ideas and not the layout or style.
</p>
</div>
</div>

<div id="outline-container-orgcd789fa" class="outline-3">
<h3 id="orgcd789fa">Exporting Artifacts</h3>
<div class="outline-text-3" id="text-orgcd789fa">
<p>
I'm only going to touch on this since it's slightly more advanced, but since it's a feature I use in my documents, I thought I'd at least mention it.
</p>

<p>
The source blocks we mentioned earlier are very powerful. Not only can Org mode export the results of running the code they contain, Org mode can save &#x2013; or "tangle" &#x2013; this code to files. In this manner, we can perhaps write code interfaces we expect the code we're describing to conform to, and then "tangle" these interfaces to the actual code-base and begin coding off of them. If the interfaces need to change, we change the specification and regenerate the files. In this way, the specification and codebase are never out of sync &#x2013; something that is frequently a problem with these types of documents.
</p>

<p>
To take advantage of this, all you have to do is specify a code block as such:
</p>

<div class="org-src-container">
<pre class="src src-org">#+BEGIN_SRC java :noweb tangle :tangle ~/code/interfaces.java

#+END_SRC
</pre>
</div>

<p>
The "noweb" option tells Org mode to tangle the file, and the "tangle" option tells it where to place the file.
</p>

<p>
Now type:
</p>
<pre class="example">
M-x org-babel-tangle
</pre>


<p>
Your code should now be sitting in the directory you specified!
</p>
</div>
</div>
</div>

<div id="outline-container-org49ef030" class="outline-2">
<h2 id="org49ef030">Conclusion</h2>
<div class="outline-text-2" id="text-org49ef030">
<p>
I've often found that specifications in the IT industry have received a negative reputation in our industry. People say things such as, "Code is worth a thousand specifications," or complain that writing specifications is just a waste of time.
</p>

<p>
I concede that when doing exploratory programming, or maybe working on a very small team, specifications may not be necessary; however, on large projects they are absolutely <i>critical</i>.
</p>

<p>
Without a blueprint, or top-level view of the architecture of a system, it can be difficult to understand how things are supposed to be laid out. Worse, it's near impossible to accurately and repeatably dissiminate the architecture of a system without a specification to point at. One-on-one conversations are not a scalable model.
</p>

<p>
I think the reason specification documents receive such a bad reputation stem from the following 3 reasons:
</p>

<ol class="org-ol">
<li>They're not coding. And coders wanna code.</li>
<li>Generally speaking, they're <i>hard</i> to do well, and they take too long to create. Hopefully I've shown that they don't have to be difficult to write, and that as quickly as you can jot down ideas, you can create a usable specification.</li>
<li>They're seen as wasted effort &#x2013; something you discard. Hopefully, I've also show how the specification can grow with the code and become a living artifact.</li>
</ol>

<p>
So love your specs, and give your team the documentation they deserve. There do exist methodologies that are a joy to use, and this &#x2013; I feel &#x2013; is one of them.
</p>

<p>
Happy hacking!
</p>
</div>
</div>

    </div>
  </div>
</div> <!-- /.container -->

        </div> <!-- /.blog-main -->
        <div class="col-sm-3 blog-sidebar">
          <div class="sidebar-module sidebar-module-inset">
  <a href="/"><span class="fa fa-home fa-2x"></span></a>
  <a href="/rss.xml"><span class="fa fa-rss-square fa-2x"></span></a>
  <a href="/tags/"><span class="fa fa-tags fa-2x"></span></a>
</div>
<div class="sidebar-module">
  <form method="get" id="searchform" action="http://www.google.com/search">
    <input type="text" class="form-control" name="q" id="s" placeholder="Search">
    <input type="hidden" name="q" value="site:katherine.cox-buday.com">
  </form>
</div>
<div class="sidebar-module">
  <h4>Categories</h4>
  <ol class="list-unstyled">
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/concurrency-in-go/">Concurrency in Go</a></li>
    <li><a href="/talks/">Talks</a></li>
    <!-- <li><a href="https://github.com/kelvinh/org-page">GitHub</a></li> -->
  </ol>
</div>
        </div> <!-- /.blog-sidebar -->
      </div> <!-- /.row -->
    </div> <!-- /.container -->
    <script src="//code.jquery.com/jquery-latest.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script src="https://google-code-prettify.googlecode.com/svn/loader/prettify.js"></script>
<script src="/media/js/main.js"></script>
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<div class="container">
  <script type="text/javascript">
    $('.post-meta').append('<ul class="list-unstyled"><li><span title="post date" class="post-info">2015-03-14</span></li><li><span title="tags" class="post-info"><a href="/tags/tech/">tech</a></span></li></ul>');
  </script>
</div> <!-- /.container -->

<footer class="footer">
  <div class="container text-muted">
    <div class="row" style="heigh:2em;">
      <div class="col-md-2 vertical-center">
        <a href="https://github.com/kat-co"><span class="fa fa-github-square fa-2x"></span></a>
        <a href="http://www.linkedin.com/in/katherinecoxbuday"><span class="fa fa-linkedin-square fa-2x"></span></a>
        <a href="https://mstdn.social/@katco"><span class="fa fa-link fa-2x"></span></a>
      </div>
      <div class="col-sm-9 vertical-center">
        Copyright &copy; <a href="mailto:cox &lt;dot&gt; katherine &lt;dot&gt; e &lt;at&gt; gmail &lt;dot&gt; com">Katherine Cox-Buday</a>,
        Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 28.x (<a href="http://orgmode.org">Org mode</a> 9.x) & <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
      </div>
    </div> <!-- ./row -->
  </div> <!-- ./container -->
</footer>

  </body>
</html>
